angular.module("MyApp").controller("BusinessCtrl",["$scope","$rootScope","$window","$routeParams","$location","fb_appId","Activity","Profile","Session","Auth","Business",function(s,n,i,o,e,t,u,c,p,r,f){function l(){i.fbAsyncInit=function(){FB.init({appId:t,responseType:"token",version:"v2.2",cookie:!0,status:!0,xfbml:!0}),r.logout()}}i.scrollTo(0,0),s.session=p,s.session.success(function(s){"OK"!=s.session&&l()}),i.fbAsyncInit=function(){FB.init({appId:t,responseType:"token",version:"v2.2",cookie:!0,status:!0,xfbml:!0})},c.get({_id:o.id},function(n){s.profile=n,1!=s.profile.p2p&&l(),f.get({business:o.business},function(n){s.business=n,s.activities=u.query({business:s.business.business})})})}]);