angular.module("MyApp").controller("MainCtrl",["$scope","$rootScope","fb_appId","$window","$location","Activity","Session","Auth",function(e,t,r,o,i,n,s,c){function a(){for(var t=0;6>t;t++){var r=document.getElementById(e.genres[t]);r.style.backgroundColor="#f2f2f2"}var r=document.getElementById("allActivs");r.style.backgroundColor="#f2f2f2"}e.cities=["Bangalore","Delhi","Mumbai"],e.sortOrders=["New on Joyage","Popular","Upcoming"],e.session=s,e.session.success(function(e){console.log("Data: "+e.session),"expired"==e.session&&(o.fbAsyncInit=function(){FB.init({appId:r,responseType:"token",version:"v2.2",cookie:!0,status:!0,xfbml:!0}),c.logout()})}),e.activ=[],e.pagenumber=1,e.gDesc="",e.city="Bangalore",e.sortSelected="New on Joyage",e.genres=["Active","Posh","Calm","Adventure","Party","Dark"],e.headingTitle="all activities",e.sortOrder="timeAdded",e.activities=n.query({page:1,sortOrder:e.sortOrder,city:e.city}),e.activ.push(e.activities),e.filterByCity=function(t){e.city=t,e.activ=[],e.activ.push(n.query({page:1,sortOrder:e.sortOrder,city:e.city}))},e.filterByGenre=function(t){e.activ=[],e.activ.push(n.query({genre:t,page:1,sortOrder:e.sortOrder,city:e.city})),e.headingTitle=t;var r=document.getElementById("gImg");if("Active"==t){r.src="/img/Active-Mood.jpg";var o=document.getElementById(t);a(),o.style.backgroundColor="#e2e2e2"}else if("Posh"==t){r.src="/img/Posh-Mood.jpg";var o=document.getElementById(t);a(),o.style.backgroundColor="#e2e2e2"}else if("Calm"==t){r.src="/img/Calm-Mood.jpg";var o=document.getElementById(t);a(),o.style.backgroundColor="#e2e2e2"}else if("Adventure"==t){r.src="/img/Adventure-Mood.jpg";var o=document.getElementById(t);a(),o.style.backgroundColor="#e2e2e2"}else if("Party"==t){r.src="/img/Party-Mood.jpg";var o=document.getElementById(t);a(),o.style.backgroundColor="#e2e2e2"}else if("Dark"==t){r.src="/img/Dark-Mood.jpg";var o=document.getElementById(t);a(),o.style.backgroundColor="#e2e2e2"}};var l=document.getElementById("allActivs");l.style.backgroundColor="#e2e2e2",e.allActivities=function(){e.activ=[],e.activ.push(n.query({page:1,sortOrder:e.sortOrder,city:e.city})),e.headingTitle="all activities",e.gDesc="",a();var t=document.getElementById("allActivs");t.style.backgroundColor="#e2e2e2"},e.pageClick=function(){"all activities"!==e.headingTitle?(e.pagenumber+=1,e.activ.push(n.query({genre:e.headingTitle,page:e.pagenumber,sortOrder:e.sortOrder,city:e.city}))):(e.pagenumber+=1,e.activ.push(n.query({page:e.pagenumber,sortOrder:e.sortOrder,city:e.city})))},e.sort=function(t){1===t?(e.sortOrder="timeAdded",e.sortSelected=e.sortOrders[0]):2===t?(e.sortOrder="popularity",e.sortSelected=e.sortOrders[1]):3===t&&(e.sortOrder="dateOfActivity",e.sortSelected=e.sortOrders[2]),"all activities"!==e.headingTitle?(e.activ=[],e.activ.push(n.query({genre:e.headingTitle,page:1,sortOrder:e.sortOrder,city:e.city}))):(e.activ=[],e.activ.push(n.query({page:1,sortOrder:e.sortOrder,city:e.city})))},e.search=function(){e.pageClick(),e.pageClick()},e.go=function(e){i.path(e)},e.displayMenu=function(){var e=document.getElementById("nav-city"),t=document.getElementById("city-drop-text");e.style.display="block",t.style.marginTop="88px"},e.closeMenu=function(){var e=document.getElementById("nav-city"),t=document.getElementById("city-drop-text");e.style.display="none",t.style.marginTop="0px"},e.displayMenu1=function(){var e=document.getElementById("nav-sort"),t=document.getElementById("sort-drop-text");e.style.display="block",t.style.marginTop="88px"},e.closeMenu1=function(){var e=document.getElementById("nav-sort"),t=document.getElementById("sort-drop-text");e.style.display="none",t.style.marginTop="0px"},e.userMenu=function(){var e=document.getElementById("user-menu-drawer");e.style&&(e.style.display="block"==e.style.display?"none":"block")}}]);